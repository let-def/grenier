<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Fastdom (grenier.Fastdom)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">grenier</a> &#x00BB; Fastdom</nav><header class="odoc-preamble"><h1>Module <code><span>Fastdom</span></code></h1><p>A library to compute graph dominators using &quot;A Simple, Fast Dominance Algorithm&quot; by Keith D. Cooper, Timothy J. Harvey, Ken Kennedy.</p></header><nav class="odoc-toc"><ul><li><a href="#graph-representation">Graph representation</a></li><li><a href="#dominance-information">Dominance information</a></li><li><a href="#dominance-computation">Dominance computation</a></li></ul></nav><div class="odoc-content"><h2 id="graph-representation"><a href="#graph-representation" class="anchor"></a>Graph representation</h2><div class="odoc-spec"><div class="spec type" id="type-graph" class="anchored"><a href="#type-graph" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a graph</span></span><span> = </span><span>{</span></code><table><tr id="type-graph.memoize" class="anchored"><td class="def record field"><a href="#type-graph.memoize" class="anchor"></a><code><span>memoize : b. <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p><code>memoize f</code> memoizes a function <code>f</code> over nodes of the graph. The function returned must evaluate <code>f x</code> at most once for each node <code>x</code>. If <code>f</code> raises an exception, the same exception must be propagated to the caller but it is not necessary to memoize it.</p><span class="comment-delim">*)</span></td></tr><tr id="type-graph.successors" class="anchored"><td class="def record field"><a href="#type-graph.successors" class="anchor"></a><code><span>successors : b. <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p><code>successors f acc n</code> fold over the successors of node <code>n</code>, threading and updating the <code>acc</code> value.</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Abstraction of graphs with nodes of type <code>'a</code>. Instance of <code>graph</code> must be provided by the user of the library.</p></div></div><h2 id="dominance-information"><a href="#dominance-information" class="anchor"></a>Dominance information</h2><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span></code></div><div class="spec-doc"><p>Dominance information for a vertex of type <code>'a</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-node" class="anchored"><a href="#val-node" class="anchor"></a><code><span><span class="keyword">val</span> node : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>The node to which this information applies.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-dominator" class="anchored"><a href="#val-dominator" class="anchor"></a><code><span><span class="keyword">val</span> dominator : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>dominator (node n)</code> returns the information associated to the dominator of <code>n</code>. If <code>n</code> is its own dominator, then <code>dominator (node n) == node n</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_reachable" class="anchored"><a href="#val-is_reachable" class="anchor"></a><code><span><span class="keyword">val</span> is_reachable : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_reachable (node n)</code> returns true iff <code>n</code> is reachable from <code>entrypoint</code> following the <code>successors</code> relation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-postorder_index" class="anchored"><a href="#val-postorder_index" class="anchor"></a><code><span><span class="keyword">val</span> postorder_index : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>postorder_index (node n)</code> is the index of <code>n</code> in the postorder traversal of the graph (see <code>dominance</code>), starting from 0.</p><p>If <code>n</code> was not reachable from the entrypoint, <code>post_order_index (node n) = -1</code></p><p>Though in this case, it is better to use <code>is_reachable</code> before to check the validity of the node.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-predecessors" class="anchored"><a href="#val-predecessors" class="anchor"></a><code><span><span class="keyword">val</span> predecessors : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> list</span></span></code></div><div class="spec-doc"><p>Reverse the <code>successors</code> relation (on the subset of the graph reachable from <code>entrypoint</code>).</p></div></div><h2 id="dominance-computation"><a href="#dominance-computation" class="anchor"></a>Dominance computation</h2><div class="odoc-spec"><div class="spec value" id="val-dominance" class="anchored"><a href="#val-dominance" class="anchor"></a><code><span><span class="keyword">val</span> dominance : <span><span><span class="type-var">'a</span> <a href="#type-graph">graph</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> array</span> * <span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span>)</span></span></code></div><div class="spec-doc"><p><code>dominance graph entrypoint = (info, map)</code> computes the dominators of <code>graph</code> starting from <code>entrypoint</code>.</p><p>The <code>info</code> array is indexed by the postorder index of a vertex, see <code>postorder_index</code>.</p><p><code>map n</code> is the dominance information of node <code>n</code>. If <code>n</code> is not reachable from <code>entrypoint</code>, then <code>is_reachable (map n) = false</code>.</p></div></div></div></body></html>