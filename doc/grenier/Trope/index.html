<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Trope (grenier.Trope)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">grenier</a> &#x00BB; Trope</nav><header class="odoc-preamble"><h1>Module <code><span>Trope</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#buffer-management">Buffer management</a></li><li><a href="#cursor-management">Cursor management</a><ul><li><a href="#creation-and-removal-of-cursors">Creation and removal of cursors</a></li><li><a href="#modification-of-buffers">Modification of buffers</a></li><li><a href="#looking-up-cursors-in-the-buffer">Looking up cursors in the buffer</a></li></ul></li></ul></nav><div class="odoc-content"><h2 id="buffer-management"><a href="#buffer-management" class="anchor"></a>Buffer management</h2><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span></code></div><div class="spec-doc"><p>Type of semi-persistent buffers</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Create a new lineage of buffers</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-clear"><a href="#val-clear" class="anchor"></a><code><span><span class="keyword">val</span> clear : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Clear contents of a buffer</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_empty"><a href="#val-is_empty" class="anchor"></a><code><span><span class="keyword">val</span> is_empty : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>true iff is buffer empty ?</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span><span class="keyword">val</span> remove : <span><span class="optlabel">?left_of</span>:unit <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">at</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="label">len</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Shift contents of the buffer by removing <code>len</code> units starting at <code>at</code>. Valid iff <code>at &gt;= 0 &amp;&amp; len &gt;= 0</code>. Cursors exactly at position <code>at</code> are removed iff called with <code>~left_of:()</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-insert"><a href="#val-insert" class="anchor"></a><code><span><span class="keyword">val</span> insert : <span><span class="optlabel">?left_of</span>:unit <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">at</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="label">len</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Shift contents of the buffer by inserting <code>len</code> units starting at <code>at</code>. Valid iff <code>at &gt;= 0 &amp;&amp; len &gt;= 0</code>. Cursors exactly at position <code>at</code> are shifted iff called with <code>~left_of:()</code>.</p></div></div><h2 id="cursor-management"><a href="#cursor-management" class="anchor"></a>Cursor management</h2><div class="odoc-spec"><div class="spec type anchored" id="type-cursor"><a href="#type-cursor" class="anchor"></a><code><span><span class="keyword">type</span> cursor</span></code></div><div class="spec-doc"><p>Type of cursors</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-member"><a href="#val-member" class="anchor"></a><code><span><span class="keyword">val</span> member : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-cursor">cursor</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Is a cursor member of a buffer ?</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find"><a href="#val-find" class="anchor"></a><code><span><span class="keyword">val</span> find : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-cursor">cursor</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Find value associated to a cursor, or raise <code>Not_found</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span><span class="keyword">val</span> compare : <span><a href="#type-cursor">cursor</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-cursor">cursor</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Compare the position of two cursors</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-position"><a href="#val-position" class="anchor"></a><code><span><span class="keyword">val</span> position : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-cursor">cursor</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Get the physical position of a cursor in a revision of a buffer</p></div></div><h3 id="creation-and-removal-of-cursors"><a href="#creation-and-removal-of-cursors" class="anchor"></a>Creation and removal of cursors</h3><div class="odoc-spec"><div class="spec value anchored" id="val-put_cursor"><a href="#val-put_cursor" class="anchor"></a><code><span><span class="keyword">val</span> put_cursor : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">at</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span> * <a href="#type-cursor">cursor</a></span></code></div><div class="spec-doc"><p>Create a new cursors at position <code>at</code> Valid iff <code>at &gt;= 0</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-put_left"><a href="#val-put_left" class="anchor"></a><code><span><span class="keyword">val</span> put_left : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-cursor">cursor</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Insert or update a cursor. Cursor is inserted at the left-most valid position.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-put_right"><a href="#val-put_right" class="anchor"></a><code><span><span class="keyword">val</span> put_right : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-cursor">cursor</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Insert or update a cursor. Cursor is inserted at the right-most valid position before buffer end.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rem_cursor"><a href="#val-rem_cursor" class="anchor"></a><code><span><span class="keyword">val</span> rem_cursor : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-cursor">cursor</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>rem_cursor t c</code> removes a cursor from the buffer. Valid iff <code>member t c</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cursor_after"><a href="#val-cursor_after" class="anchor"></a><code><span><span class="keyword">val</span> cursor_after : <span><a href="#type-cursor">cursor</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-cursor">cursor</a></span></code></div><div class="spec-doc"><p><code>cursor_after c</code> creates a cursor that is immediately after <code>c</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cursor_before"><a href="#val-cursor_before" class="anchor"></a><code><span><span class="keyword">val</span> cursor_before : <span><a href="#type-cursor">cursor</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-cursor">cursor</a></span></code></div><div class="spec-doc"><p><code>cursor_before c</code> creates a cursor that is immediately before <code>c</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cursor_at_origin"><a href="#val-cursor_at_origin" class="anchor"></a><code><span><span class="keyword">val</span> cursor_at_origin : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-cursor">cursor</a></span></code></div><div class="spec-doc"><p><code>cursor_at_origin t</code> creates a cursor that is minimal for <code>t</code> (before all other cursors in <code>t</code>)</p></div></div><h3 id="modification-of-buffers"><a href="#modification-of-buffers" class="anchor"></a>Modification of buffers</h3><div class="odoc-spec"><div class="spec value anchored" id="val-remove_between"><a href="#val-remove_between" class="anchor"></a><code><span><span class="keyword">val</span> remove_between : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-cursor">cursor</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-cursor">cursor</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Remove anything between two cursors. <code>remove_between t a b</code> is valid iff <code>member t a &amp;&amp; member t b &amp;&amp; compare a b &lt;= 0</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove_before"><a href="#val-remove_before" class="anchor"></a><code><span><span class="keyword">val</span> remove_before : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-cursor">cursor</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>remove_before t c len</code> removes <code>len</code> units before <code>c</code>. Valid iff <code>member t c &amp;&amp; len &gt;= 0</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove_after"><a href="#val-remove_after" class="anchor"></a><code><span><span class="keyword">val</span> remove_after : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-cursor">cursor</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>remove_after t c len</code> removes <code>len</code> units after <code>c</code>. Valid iff <code>member t c &amp;&amp; len &gt;= 0</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-insert_before"><a href="#val-insert_before" class="anchor"></a><code><span><span class="keyword">val</span> insert_before : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-cursor">cursor</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>insert_before t c len</code> inserts <code>len</code> units before <code>c</code>. Valid iff <code>member t c &amp;&amp; len &gt;= 0</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-insert_after"><a href="#val-insert_after" class="anchor"></a><code><span><span class="keyword">val</span> insert_after : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-cursor">cursor</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>insert_before t c len</code> inserts <code>len</code> units after <code>c</code>. Valid iff <code>member t c &amp;&amp; len &gt;= 0</code>.</p></div></div><h3 id="looking-up-cursors-in-the-buffer"><a href="#looking-up-cursors-in-the-buffer" class="anchor"></a>Looking up cursors in the buffer</h3><div class="odoc-spec"><div class="spec value anchored" id="val-find_before"><a href="#val-find_before" class="anchor"></a><code><span><span class="keyword">val</span> find_before : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="#type-cursor">cursor</a> * <span class="type-var">'a</span>)</span> option</span></span></code></div><div class="spec-doc"><p><code>find_before t at</code> finds the last cursor <code>c</code> in <code>t</code> satisfying <code>position t c &lt;= at</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_after"><a href="#val-find_after" class="anchor"></a><code><span><span class="keyword">val</span> find_after : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="#type-cursor">cursor</a> * <span class="type-var">'a</span>)</span> option</span></span></code></div><div class="spec-doc"><p><code>find_after t at</code> finds the first cursor <code>c</code> in <code>t</code> satisfying <code>position t c &gt;= at</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-seek_before"><a href="#val-seek_before" class="anchor"></a><code><span><span class="keyword">val</span> seek_before : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-cursor">cursor</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="#type-cursor">cursor</a> * <span class="type-var">'a</span>)</span> option</span></span></code></div><div class="spec-doc"><p><code>seek_before t c</code> finds the last cursor <code>c'</code> in <code>t</code> satisfying <code>compare c' c &lt; 0</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-seek_after"><a href="#val-seek_after" class="anchor"></a><code><span><span class="keyword">val</span> seek_after : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-cursor">cursor</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="#type-cursor">cursor</a> * <span class="type-var">'a</span>)</span> option</span></span></code></div><div class="spec-doc"><p><code>seek_after t c</code> finds the first cursor <code>c'</code> in <code>t</code> satisfying <code>compare c' c &gt; 0</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_list"><a href="#val-to_list" class="anchor"></a><code><span><span class="keyword">val</span> to_list : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(int * <a href="#type-cursor">cursor</a> * <span class="type-var">'a</span>)</span> list</span></span></code></div></div></div></body></html>
