<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Trope (grenier.Trope)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">grenier</a> &#x00BB; Trope</nav><h1>Module <code>Trope</code></h1><h2 id="buffer-management"><a href="#buffer-management" class="anchor"></a>Buffer management</h2><nav class="toc"><ul><li><a href="#cursor-management">Cursor management</a><ul><li><a href="#creation-and-removal-of-cursors">Creation and removal of cursors</a></li><li><a href="#modification-of-buffers">Modification of buffers</a></li><li><a href="#looking-up-cursors-in-the-buffer">Looking up cursors in the buffer</a></li></ul></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'a t</span></code></dt><dd><p>Type of semi-persistent buffers</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : unit <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Create a new lineage of buffers</p></dd></dl><dl><dt class="spec value" id="val-clear"><a href="#val-clear" class="anchor"></a><code><span class="keyword">val</span> clear : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Clear contents of a buffer</p></dd></dl><dl><dt class="spec value" id="val-is_empty"><a href="#val-is_empty" class="anchor"></a><code><span class="keyword">val</span> is_empty : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> bool</code></dt><dd><p>true iff is buffer empty ?</p></dd></dl><dl><dt class="spec value" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span class="keyword">val</span> remove : <span>?&#8288;left_of:unit</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>at:int</span> <span>&#45;&gt;</span> <span>len:int</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Shift contents of the buffer by removing <code>len</code> units starting at <code>at</code>. Valid iff <code>at &gt;= 0 &amp;&amp; len &gt;= 0</code>. Cursors exactly at position <code>at</code> are removed iff called with <code>~left_of:()</code>.</p></dd></dl><dl><dt class="spec value" id="val-insert"><a href="#val-insert" class="anchor"></a><code><span class="keyword">val</span> insert : <span>?&#8288;left_of:unit</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>at:int</span> <span>&#45;&gt;</span> <span>len:int</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Shift contents of the buffer by inserting <code>len</code> units starting at <code>at</code>. Valid iff <code>at &gt;= 0 &amp;&amp; len &gt;= 0</code>. Cursors exactly at position <code>at</code> are shifted iff called with <code>~left_of:()</code>.</p></dd></dl><section><header><h2 id="cursor-management"><a href="#cursor-management" class="anchor"></a>Cursor management</h2></header><dl><dt class="spec type" id="type-cursor"><a href="#type-cursor" class="anchor"></a><code><span class="keyword">type</span> cursor</code></dt><dd><p>Type of cursors</p></dd></dl><dl><dt class="spec value" id="val-member"><a href="#val-member" class="anchor"></a><code><span class="keyword">val</span> member : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-cursor">cursor</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>Is a cursor member of a buffer ?</p></dd></dl><dl><dt class="spec value" id="val-find"><a href="#val-find" class="anchor"></a><code><span class="keyword">val</span> find : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-cursor">cursor</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Find value associated to a cursor, or raise <code>Not_found</code></p></dd></dl><dl><dt class="spec value" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span class="keyword">val</span> compare : <a href="index.html#type-cursor">cursor</a> <span>&#45;&gt;</span> <a href="index.html#type-cursor">cursor</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Compare the position of two cursors</p></dd></dl><dl><dt class="spec value" id="val-position"><a href="#val-position" class="anchor"></a><code><span class="keyword">val</span> position : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-cursor">cursor</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Get the physical position of a cursor in a revision of a buffer</p></dd></dl><section><header><h3 id="creation-and-removal-of-cursors"><a href="#creation-and-removal-of-cursors" class="anchor"></a>Creation and removal of cursors</h3></header><dl><dt class="spec value" id="val-put_cursor"><a href="#val-put_cursor" class="anchor"></a><code><span class="keyword">val</span> put_cursor : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>at:int</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> * <a href="index.html#type-cursor">cursor</a></code></dt><dd><p>Create a new cursors at position <code>at</code> Valid iff <code>at &gt;= 0</code>.</p></dd></dl><dl><dt class="spec value" id="val-put_left"><a href="#val-put_left" class="anchor"></a><code><span class="keyword">val</span> put_left : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-cursor">cursor</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Insert or update a cursor. Cursor is inserted at the left-most valid position.</p></dd></dl><dl><dt class="spec value" id="val-put_right"><a href="#val-put_right" class="anchor"></a><code><span class="keyword">val</span> put_right : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-cursor">cursor</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Insert or update a cursor. Cursor is inserted at the right-most valid position before buffer end.</p></dd></dl><dl><dt class="spec value" id="val-rem_cursor"><a href="#val-rem_cursor" class="anchor"></a><code><span class="keyword">val</span> rem_cursor : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-cursor">cursor</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>rem_cursor t c</code> removes a cursor from the buffer. Valid iff <code>member t c</code>.</p></dd></dl><dl><dt class="spec value" id="val-cursor_after"><a href="#val-cursor_after" class="anchor"></a><code><span class="keyword">val</span> cursor_after : <a href="index.html#type-cursor">cursor</a> <span>&#45;&gt;</span> <a href="index.html#type-cursor">cursor</a></code></dt><dd><p><code>cursor_after c</code> creates a cursor that is immediately after <code>c</code>.</p></dd></dl><dl><dt class="spec value" id="val-cursor_before"><a href="#val-cursor_before" class="anchor"></a><code><span class="keyword">val</span> cursor_before : <a href="index.html#type-cursor">cursor</a> <span>&#45;&gt;</span> <a href="index.html#type-cursor">cursor</a></code></dt><dd><p><code>cursor_before c</code> creates a cursor that is immediately before <code>c</code>.</p></dd></dl><dl><dt class="spec value" id="val-cursor_at_origin"><a href="#val-cursor_at_origin" class="anchor"></a><code><span class="keyword">val</span> cursor_at_origin : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-cursor">cursor</a></code></dt><dd><p><code>cursor_at_origin t</code> creates a cursor that is minimal for <code>t</code> (before all other cursors in <code>t</code>)</p></dd></dl></section><section><header><h3 id="modification-of-buffers"><a href="#modification-of-buffers" class="anchor"></a>Modification of buffers</h3></header><dl><dt class="spec value" id="val-remove_between"><a href="#val-remove_between" class="anchor"></a><code><span class="keyword">val</span> remove_between : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-cursor">cursor</a> <span>&#45;&gt;</span> <a href="index.html#type-cursor">cursor</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Remove anything between two cursors. <code>remove_between t a b</code> is valid iff <code>member t a &amp;&amp; member t b &amp;&amp; compare a b &lt;= 0</code></p></dd></dl><dl><dt class="spec value" id="val-remove_before"><a href="#val-remove_before" class="anchor"></a><code><span class="keyword">val</span> remove_before : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-cursor">cursor</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>remove_before t c len</code> removes <code>len</code> units before <code>c</code>. Valid iff <code>member t c &amp;&amp; len &gt;= 0</code>.</p></dd></dl><dl><dt class="spec value" id="val-remove_after"><a href="#val-remove_after" class="anchor"></a><code><span class="keyword">val</span> remove_after : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-cursor">cursor</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>remove_after t c len</code> removes <code>len</code> units after <code>c</code>. Valid iff <code>member t c &amp;&amp; len &gt;= 0</code>.</p></dd></dl><dl><dt class="spec value" id="val-insert_before"><a href="#val-insert_before" class="anchor"></a><code><span class="keyword">val</span> insert_before : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-cursor">cursor</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>insert_before t c len</code> inserts <code>len</code> units before <code>c</code>. Valid iff <code>member t c &amp;&amp; len &gt;= 0</code>.</p></dd></dl><dl><dt class="spec value" id="val-insert_after"><a href="#val-insert_after" class="anchor"></a><code><span class="keyword">val</span> insert_after : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-cursor">cursor</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>insert_before t c len</code> inserts <code>len</code> units after <code>c</code>. Valid iff <code>member t c &amp;&amp; len &gt;= 0</code>.</p></dd></dl></section><section><header><h3 id="looking-up-cursors-in-the-buffer"><a href="#looking-up-cursors-in-the-buffer" class="anchor"></a>Looking up cursors in the buffer</h3></header><dl><dt class="spec value" id="val-find_before"><a href="#val-find_before" class="anchor"></a><code><span class="keyword">val</span> find_before : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-cursor">cursor</a> * <span class="type-var">'a</span>)</span> option</span></code></dt><dd><p><code>find_before t at</code> finds the last cursor <code>c</code> in <code>t</code> satisfying <code>position t c &lt;= at</code></p></dd></dl><dl><dt class="spec value" id="val-find_after"><a href="#val-find_after" class="anchor"></a><code><span class="keyword">val</span> find_after : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-cursor">cursor</a> * <span class="type-var">'a</span>)</span> option</span></code></dt><dd><p><code>find_after t at</code> finds the first cursor <code>c</code> in <code>t</code> satisfying <code>position t c &gt;= at</code></p></dd></dl><dl><dt class="spec value" id="val-seek_before"><a href="#val-seek_before" class="anchor"></a><code><span class="keyword">val</span> seek_before : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-cursor">cursor</a> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-cursor">cursor</a> * <span class="type-var">'a</span>)</span> option</span></code></dt><dd><p><code>seek_before t c</code> finds the last cursor <code>c'</code> in <code>t</code> satisfying <code>compare c' c &lt; 0</code></p></dd></dl><dl><dt class="spec value" id="val-seek_after"><a href="#val-seek_after" class="anchor"></a><code><span class="keyword">val</span> seek_after : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-cursor">cursor</a> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-cursor">cursor</a> * <span class="type-var">'a</span>)</span> option</span></code></dt><dd><p><code>seek_after t c</code> finds the first cursor <code>c'</code> in <code>t</code> satisfying <code>compare c' c &gt; 0</code></p></dd></dl><dl><dt class="spec value" id="val-to_list"><a href="#val-to_list" class="anchor"></a><code><span class="keyword">val</span> to_list : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(int * <a href="index.html#type-cursor">cursor</a> * <span class="type-var">'a</span>)</span> list</span></code></dt></dl></section></section></div></body></html>